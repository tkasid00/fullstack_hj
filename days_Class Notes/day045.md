## 포트폴리오 역할 분담


### 👥 5명 역할 분담 

| 담당자 | 역할 | 주요 테이블 |
|--------|------|-------------|
| A | 사용자 및 반려동물 관리 | `USER`, `PET`, `PET_TYPE` |
| B | 사료 및 브랜드 관리 | `FOOD`, `FOOD_BRAND`, 'FOOD_INGREDIENT' |
| C | 질환 정보 및 매핑 | `DISEASE`, `PET_DISEASE` |
| D | 추천 및 즐겨찾기 기능 | `FOOD_RECOMMEND`, `FAVORITE_FOOD` |
| E | 리뷰 및 영양소 관리 | `REVIEW`, `NUTRIENT`, 'FOOD_NUTRIENT' |  ✔ 내 역할



1. 리뷰 테이블 
    1) 아이디어 
        - 일반적인 게시판 말고 한 줄 게시판이 적합해 보임
        - mbti 선택하듯이 브랜드+제품명 선택하게 하고 별점과 500자 이내 짧은 리뷰 가능
        - 이미지는 비워둘 것(추후 구현)


### --12. table (review) + sequence (review_seq)
| 컬럼명      | 데이터 타입       | 제약 조건                                                | 설명 |
|-------------|-------------------|----------------------------------------------------------|------|
| `review_id`  | `NUMBER`          | `PRIMARY KEY`                                            | 리뷰 ID |
| `userid`     | `NUMBER`          | `FOREIGN KEY REFERENCES user(userid)`                   | 작성자 |
| `password`   | `VARCHAR2(50)`     | `not null`                                                | 글 비밀번호|
| `brand_id`    | `NUMBER`          | `FOREIGN KEY REFERENCES food_brand(brand_id)`            | 브랜드 ID |
| `food_id`    | `NUMBER`          | `FOREIGN KEY REFERENCES food(food_id)`                  | 사료 ID |
| `food_img`    | `VARCHAR2(300)`   | `우선 null값 채우기`                                      | 사료 이미지 |
| `rating`     | `NUMBER(1)`       | `CHECK (rating BETWEEN 1 AND 5)`                         | 평점 |
| `title`     | `VARCHAR2(100)`       |                                                      | 제목 |
| `review_comment`    | `VARCHAR2(500)`   | —                                                 | 리뷰 내용 |
| `created_at` | `VARCHAR2(200)`   | —                                                        | 작성일 |

```
 리뷰id     작성자닉네임    글비밀번호      브랜드id    사료id      사료이미지      평점        제목            리뷰 내용                              작성일
  '1'        'user1'       '1111'        '2'        '03'        null        *****      잘먹어요           '기호성이 너무 좋아서 우리 애가 돼지가 됐어요'      '2025-10-30'
```


2. 영양소 테이블 
    - 영양소별 기준이 되는 추가 테이블 생성
    - food_nutrient 테이블에서 사료별 영양소 정보 입력하면
    - nutrient 테이블에서 영양소 정보와 매칭하고 단위 붙여주고
    - NUTRIENT_RANGE 기준 테이블에서 수치 3단계로 나눠서 어떤 구간에 위치하는지 쉽게 설명할 수 있음



### --9. table (food_nutrient) 단순 사료 라벨 데이터
| 컬럼명         | 데이터 타입       | 제약 조건                                                        | 설명 |
|----------------|-------------------|------------------------------------------------------------------|------|
| `food_id`       | `NUMBER`          | `FOREIGN KEY REFERENCES food(food_id)`                          | 사료 ID |
| `nutrient_id`   | `NUMBER`          | `FOREIGN KEY REFERENCES nutrient(nutrient_id)`                  | 영양소 ID |
| `amount`        | `NUMBER`          | —                                                                | 포함량 |
| **복합키**      |                   | `PRIMARY KEY (food_id, nutrient_id)`                            | 사료-영양소 매핑 |

```
사료id      영양소id       포함량
 '02'         '6'           '30'
```

### --8. table (nutrient) + sequence (nutrient_seq) 영양소의 단위 
| 컬럼명         | 데이터 타입       | 제약 조건        | 설명 |
|----------------|-------------------|------------------|------|
| `nutrient_id`   | `NUMBER`          | `PRIMARY KEY`    | 영양소 ID |
| `nutrient_name` | `VARCHAR2(100)`   | `NOT NULL`       | 영양소 이름 |
| `unit`          | `VARCHAR2(50)`    | —                | 단위 (g, mg 등) |
    

```
영양소id    영양소이름      단위
'6'         '단백질'       '%'
``` 



### --14. table (NUTRIENT_RANGE) 영양소 기준 설정

| 컬럼명         | 데이터 타입       | 제약 조건        | 설명 |
|----------------|-------------------|------------------|------|
| `range_id`    |    `NUMBER`          | `PRIMARY KEY`    | 구간 ID |
| `pet_type_id`    | `NUMBER`          | `FOREIGN KEY REFERENCES PET_TYPE(pet_type_id)`    | 고양이/강아지 ID |
| `nutrient_id`   | `NUMBER`          | `FOREIGN KEY REFERENCES nutrient(nutrient_id)`    | 영양소 ID |
| `min_value`      | `NUMBER`    | `NOT NULL` | 최소값|
| `max_value`      | `NUMBER`    | `NOT NULL`      | 최대값 |
| `range_label`   | `VARCHAR2(50)`    | `NOT NULL`       | 중,저,고 등 직관적 구간 설명 |

```
펫타입ID    구간id     영양소ID        최소값       최대값      설명
'1'     '101'           '6'         '15'        '25'      '고양이건사료_저단백'
'1'     '102'           '6'         '26'        '40'      '고양이건사료_중단백'
'1'     '103'           '6'         '41'        '55'      '고양이건사료_고단백'
``` 

----------------------------------------------------------------------------------------------------------------------------------
--리뷰 테이블
CREATE TABLE REVIEW (
    REVIEWID NUMBER PRIMARY KEY,
    USERID NUMBER,
    PASSWORD VARCHAR2(50) NOT NULL,
    BRANDID NUMBER,
    FOODID NUMBER,
    FOODIMG VARCHAR2(300),
    RATING NUMBER(1) CHECK (RATING BETWEEN 1 AND 5),
    TITLE VARCHAR2(100), 
    REVIEWCOMMENT VARCHAR2(500),
    CREATEDAT DATE DEFAULT SYSDATE
);

CREATE SEQUENCE REVIEW_SEQ;

DESC REVIEW;
SELECT * FROM REVIEW;
INSERT INTO REVIEW VALUES(1, 1, '1111', 1, 3, NULL, 5, '잘먹어요', '기호성이 너무 좋아서 우리 애가 돼지가 됐어요', SYSDATE ); 


--라벨영양소 테이블
CREATE TABLE FOODNUTRIENT(
    FOODID NUMBER,
    NUTRIENTID NUMBER,
    AMOUNT NUMBER
);

DESC FOODNUTRIENT;
SELECT * FROM FOODNUTRIENT;
INSERT INTO FOODNUTRIENT VALUES(3, 6, 30);

--영양소 테이블
CREATE TABLE NUTRIENT(
    NUTRIENTID NUMBER PRIMARY KEY,
    NUTRIENTNAME VARCHAR2(100) NOT NULL,
    UNIT VARCHAR2(50) 
);

CREATE SEQUENCE NUTRIENT_SEQ;

DESC NUTRIENT;
SELECT * FROM NUTRIENT;
INSERT INTO NUTRIENT VALUES(6, '단백질', '%');

--범위 테이블
CREATE TABLE NUTRIENTRANGE(
    RANGEID NUMBER PRIMARY KEY,
    PETTYPEID NUMBER,
    NUTRIENTID NUMBER,
    MINVALUE NUMBER NOT NULL,
    MAXVALUE NUMBER NOT NULL,
    RANGELABEL VARCHAR2(50) NOT NULL
);

DESC NUTRIENTRANGE;
SELECT * FROM NUTRIENTRANGE;
INSERT INTO NUTRIENTRANGE VALUES(1, 101, 6, 15, 25, '고양이건사료_저단백');
INSERT INTO NUTRIENTRANGE VALUES(2, 102, 6, 26, 40, '고양이건사료_중단백');
INSERT INTO NUTRIENTRANGE VALUES(3, 103, 6, 41, 55, '고양이건사료_고단백');

--영양소 조인 예시 WHERE <보기 편함
SELECT FOODID, NUTRIENTNAME, AMOUNT, UNIT, RANGELABEL 
FROM  FOODNUTRIENT A, NUTRIENT B ,  NUTRIENTRANGE C
WHERE A.NUTRIENTID = B.NUTRIENTID
AND B.NUTRIENTID = C.NUTRIENTID 
AND A.AMOUNT BETWEEN C.MINVALUE AND C.MAXVALUE ;


--JOIN ON <쓰기 편함
SELECT FOODID, NUTRIENTNAME, AMOUNT, UNIT, RANGELABEL 
FROM  FOODNUTRIENT A 
JOIN NUTRIENT B ON(A.NUTRIENTID = B.NUTRIENTID) 
JOIN NUTRIENTRANGE C ON(B.NUTRIENTID = C.NUTRIENTID 
AND A.AMOUNT BETWEEN C.MINVALUE AND C.MAXVALUE );
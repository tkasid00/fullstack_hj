■ MYBATIS 
>동적 SQL

ex)
    select * from emp;
    select * from emp where ename = 'SCOTT';
    select * from emp where job = 'SALESMAN'

-> SQL구문 : MYBATIS 3개 필요

*링크
https://mybatis.org/mybatis-3/ko/dynamic-sql.html


Q1. 다음 구문 하나로 합치기
    select * from emp where ename = 'SCOTT';
    select * from emp where job = 'SALESMAN'

->  select * from emp where ${searchType} = #{keyword}
    ${searchType} -> ''붙지 않음  stmt
    #{keyword} -> ''자동 생성 pstmt
    

Q2. select * from emp where ename=#{name} and job=#{job}
        >select * from emp where ename=#{name} <if test='job!=null'>and job=#{job}</if>
            select * from emp where ename='SMITH';
            select * from emp where ename='SMITH and job='CLERK';

Q3. select * from emp where
        select * from emp where empno=7638
        <choose>
        <when test="ename!=null"> and ename="SMITH" </when>
        <when test="job!=null"> and job='CLERK' </when>
        <otherwise> and mgr=7902 </otherwise>
        </choose>
        select * from emp where empno=7369 and mgr=7902
        select * from emp where empno=7369 and ename = 'SMITH' and mgr=7902;
        select * from emp where empno=7369 and ename = 'SMITH' and job='CLERK';
        select * from emp where empno=7369 and ename = 'SMITH' and job='CLERK' and mgr=7902;

Q4. select * from emp 
    <where>
		<if test="ename!=null">ename=#{ename}</if>
		<if test="job!=null">job=#{job}</if>
    </where>

        select * from emp  where ename='SMITH';
        select * from emp  where job='CLERK';
        select * from emp  where ename = 'SMITH' and job='CLERK'

Q5. update set ename=#{ename}, job=#{job} where empno=#{empno}       
    update emp 
    <set>
        <if test="ename!=null">ename=#{ename},</if>
        <if test="job!=null">job=#{job},</if>
    </set>
        where empno=#{empno}   

    update emp set ename=#{ename} where empno=#{empno}   
    update emp set job=#{job} where empno=#{empno}   
    update emp set ename=#{ename}, job=#{job} where empno=#{empno}   

Q6.
 select * from emp
	<where>
	    empno in
	    <foreach item="empno" collection="list" separator="," open="(" close=")">#{empno}</foreach>
	</where>   

    select * from emp where empno in(7369, 7499, 7521)

---

Q7. join

 >desc authorities    
    이름    널?       유형            
    ----- -------- ------------- 
    EMAIL NOT NULL VARCHAR2(100) 
    AUTH  NOT NULL VARCHAR2(100) 

>desc appuser
     이름           널?       유형            
    ------------ -------- ------------- 
    APP_USER_ID  NOT NULL NUMBER(5)     
    EMAIL        NOT NULL VARCHAR2(100) 
    PASSWORD              VARCHAR2(100) 
    MBTI_TYPE_ID          NUMBER(38)    
    CREATED_AT            DATE          
    UFILE                 VARCHAR2(255) 

 - AUTH : member, admin 

    select a.email, password, auth
    from appuser a left join authorities au on(a.email=au.email)
    where a.email='1@1.1';


*paging

1. 프로젝트 복사하기
2. 페이징?
    model
        >table
      insert into sboard1 ( ID , APP_USER_ID , btitle, bcontent, bpass, bfile,  bip )
      select  sboard1_seq.nextval , APP_USER_ID , btitle, bcontent, bpass, bfile,  bip   from sboard1;


        >dao 10개씩
            select * 
            from (select row_number() over(order by created_at desc) as rnum, 
                        id , app_user_id , btitle, bcontent, bpass, bfile,  bip , bhit, createdat) A
            where A.rnum between 1 and 10;

            1페이지 시작1 끝10
            2페이지 시작11 끝 20...


        >dto
